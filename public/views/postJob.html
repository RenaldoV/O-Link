<div class="container w-xxl w-auto-xs s" ng-controller="postJob">
    <div class="wrapper text-center">
        <strong>Post a Job</strong><br/>
    </div>

<form name="jobForm" class="list-group list-group-sm form-validation" ng-submit="submitForm()">
    <div class="text-danger wrapper text-center">

    </div>

    <h4 class="form-section-label">Job Details</h4>
    <div class="list-group list-group-sm form-group">
        <fieldset class="form-group">
            <div class="list-group-item">
                <input type="text" class="form-control no-border" placeholder="Job Role" ng-model="job.post.role" required>
            </div>
            <div class="list-group-item">
                <textarea rows=7 class="form-control no-border" placeholder="Description (100 - 500 characters)" ng-model="job.post.description" maxlength="500" minlength="100" required></textarea>
            </div>
            <div class="list-group-item">
                <input type="text" class="form-control no-border" placeholder="Location" ng-model="job.post.location" required>
            </div>
            <div class="list-group-item">
                <select class="form-control no-border" ng-model="job.post.category" required>

                    <option value="" selected disabled>Select Category</option>
                    <option ng-repeat="category in categories" value="{{category}}">{{category}}</option>

                </select>
            </div>
        </fieldset>
    </div>

    <h4 class="form-section-label">Pay</h4>
    <div class="list-group list-group-sm form-group">
        <div class="list-group-item">
            <select id="period" class="form-control no-border" ng-model="job.post.timePeriod" required>
                <option value="" selected disabled>Time Period</option>

                <option ng-repeat="period in timePeriods" value="{{period.name}}">{{period.name}} ({{period.description}})</option>
            </select>
            <br>
            <div class="checkbox m-b-md m-t-none">
                <label class="i-checks">
                    <input type="checkbox" ng-model="job.post.sharedTips"><i></i>Shared Tips
                </label>
            </div>
            <div class="checkbox m-b-md m-t-none">
                <label class="i-checks">
                    <input type="checkbox" ng-model="job.post.individualTips"><i></i>Individual Tips
                </label>
            </div>
        </div>
        <div class="list-group-item">
            <input id="amount"  type="number" step="any" class="controls form-control no-border" width="50px" placeholder="Amount" ng-model="job.post.pay" regex="^[1-9][0-9]*$" required>
        </div>
    </div>

    <h4 id="datesLabel" class="form-section-label">Dates</h4>
    <div class="list-group list-group-sm form-group">
        <div class="list-group-item">
            <input id="startDate" type="text" class="controls form-control no-border" placeholder="Starting Date" ng-model="job.post.startingDate" required>
        </div>
        <div id="endDateDiv" class="list-group-item" hidden="hidden">
            <input id="endDate" type="text" class="controls form-control no-border" placeholder="End Date" ng-model="job.post.endDate" >
        </div>
        <div class="list-group-item" id="times" hidden>

        </div>
    </div>

    <h4 class="form-section-label">Requirements</h4>
    <div class="list-group list-group-sm form-group">
        <div class="list-group-item">
            <select class="form-control no-border" id="stuGender" name="stuGender" ng-model="job.post.gender" required>
                <option value="" selected disabled>Gender</option>
                <option value="M">Male</option>
                <option value="F">Female</option>
                <option value="Any">Any</option>
            </select>
        </div>
        <div id="reqGroup" class="list-group-item">

            <div id="reqInputs">
                <div class="reqBox" ng-repeat="req in job.post.requirements">
                    <select class="form-control no-border" ng-model="req.name" required>
                        <option value="" selected disabled>Choose Requirement</option>
                        <option ng-repeat="reqName in reqNames" value="{{reqName}}">{{reqName}}</option>
                    </select>

                    <select name="how" class="form-control no-border" ng-model="req.symbol" required>
                        <option value="" selected disabled>Choose Symbol</option>
                        <option value="A">A (80-100%)</option>
                        <option value="B">B (70-79%)</option>
                        <option value="C">C (60-69%)</option>
                        <option value="D">D (50-59%)</option>
                        <option value="F">F (40-49%)</option>
                    </select>
                </div>
            </div>

            <div id="reqButtonGrp" class="btn-group-vertical" role="group">

                <button ng-if="job.post.requirements" type="button" class="removeReq btn btn-default" ng-click="close(job.post.requirements)">Remove<span class="glyphicon glyphicon-minus"></span></button>
                <button type="button" id="addReq" class="btn btn-default" ng-click="add()">Add requirement <span class="glyphicon glyphicon-plus"></span></button>
            </div>
            <br/>
            <br/>
            <div class="checkbox m-b-md m-t-none">
                <label class="i-checks">
                    <input type="checkbox" ng-model="job.post.driverslicence"><i></i>Drivers licence required?
                </label>
            </div>
            <!-- EXTRA SHIT <div class="checkbox m-b-md m-t-none">
                <label class="i-checks">
                    <input type="checkbox" ng-model="job.post.transport"><i></i>Own transport licence required?
                </label>
            </div>-->
            <div class="checkbox m-b-md m-t-none">
                <label class="i-checks">
                    <input type="checkbox" ng-model="job.post.interviewRequired"><i></i>Interview required?
                </label>
            </div>
        </div>
    </div>

    <br/>
    <h4 class="form-section-label">Thresholds</h4>
    <div class="list-group list-group-sm form-group">
        <div class="list-group-item">
            <input  type="number" class="controls form-control no-border" width="50px" placeholder="Positions available" ng-model="job.post.spotsAvailable" regex="^[1-9][0-9]*$" required>
        </div>
        <div class="list-group-item">
            <input  type="number" class="controls form-control no-border" width="50px" placeholder="Applications accepted per position" ng-model="job.post.threshold" regex="^[1-9][0-9]*$" required>
        </div>
    </div>

    <div id="postJobForm" class="list-group list-group-sm" >
        <button ng-if="!job.status" type="submit"  class="post-job-btn btn btn-lg btn-primary btn-block" >Post Job</button>
        <button ng-if="job.status == 'inactive'" type="submit"  class="post-job-btn btn btn-lg btn-primary btn-block" >RePost Job</button>
        <button ng-if="job.status == 'active'" type="submit"  class="post-job-btn btn btn-lg btn-primary btn-block" >Edit Job</button>
    </div>

    <div><p>{{message}}</p></div>
    </form>
</div>

<script>





    $('#startDate').datepicker({
        changeMonth: true,
        changeYear: true,
        minDate :0,
        onSelect: function(selected) {
            $("#endDate").datepicker("option","minDate", selected)
        }
    });
    $('#endDate').datepicker({
        changeMonth: true,
        changeYear: true,
        onSelect: function(selected) {
            $("#startDate").datepicker("option","maxDate", selected)
        }
    });



</script>